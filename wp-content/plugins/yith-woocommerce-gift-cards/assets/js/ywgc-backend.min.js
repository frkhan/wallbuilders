jQuery(function(o){function t(e){var t={action:"add_gift_card_amount",amount:o("#gift_card-amount").val(),product_id:o("#post_ID").val()},a=e.closest("span.add-new-amount-section");a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),o.post(ywgc_data.ajax_url,t,function(e){1==e.code&&o("p._gift_card_amount_field").replaceWith(e.value),o("#gift_card-amount").val(""),o("#gift_card-amount").selectionStart=0,o("#gift_card-amount").selectionEnd=0,o("#gift_card-amount").focus(),a.unblock()})}o(document).on("click","a.remove-amount",function(e){e.preventDefault();var e={action:"remove_gift_card_amount",amount:o(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:o("#post_ID").val()},t=o(this).closest("span.variation-amount");t.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),o.post(ywgc_data.ajax_url,e,function(e){1==e.code&&t.remove(),t.unblock()})}),o(document).on("click","a.add-new-amount",function(e){e.preventDefault(),t(o(this))}),o(document).on("keypress","input#gift_card-amount",function(e){13===event.which&&(e.preventDefault(),o(this).attr("disabled","disabled"),t(o(this)),o(this).removeAttr("disabled"))}),o(document).on("change",'input[name="ywgc_physical_gift_card"]',function(e){var t=o(this).prop("checked");o('input[name="_virtual"]').prop("checked",!t)}),o(document).on("click",".image-gallery-reset",function(e){e.preventDefault(),o("#ywgc-card-header-image img").remove(),o("#ywgc_product_image_id").val(0)}),o(document).on("click",".image-gallery-chosen",function(e){e.preventDefault();var t,a=o(this).attr("name")+"_id";t||(e=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:ywgc_data.choose_image_text,priority:20,filterable:"uploaded"})],(t=wp.media.frames.downloadable_file=wp.media({title:ywgc_data.choose_image_text,library:{type:""},button:{text:ywgc_data.choose_image_text},multiple:!1,states:e})).on("select",function(){o("#ywgc-card-header-image img").remove();var e=t.state().get("selection").first().toJSON();o("#ywgc-card-header-image").prepend('<img width="80" src="'+e.url+'" />'),o("#"+a).val(e.id),o(".plugin-option .upload_img_url").trigger("change")})),t.open()}),o("body .ywgc_order_sold_as_gift_card").each(function(){o(this).parent("td").find(".wc-order-item-name").hide()}),o("._manage_stock_field").addClass("show_if_gift-card"),"undefined"!=typeof jQuery.fn.datepicker&&o(".ywgc-expiration-date-picker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"})});