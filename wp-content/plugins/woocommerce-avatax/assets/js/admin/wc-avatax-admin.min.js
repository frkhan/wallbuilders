"use strict";(function(){jQuery(document).ready(function(u){var a,t,e,n,_=null!=(a=window.wc_avatax_admin)?a:{},i=null!=(t=window.woocommerce_admin)?t:{},c=null!=(e=window.woocommerce_admin_meta_boxes)?e:{},r=null!=(n=window.accounting)?n:{};if(u("input.wc-avatax-connection-field").each(function(a,t){var e="connected"===u(t).data("wc-avatax-connection-status")?"dashicons-yes":"dashicons-no";return u(t).after('<span class="wc-avatax-connection-indicator dashicons"></span>'),u(t).siblings(".wc-avatax-connection-indicator").addClass(e)}),u("input#wc_avatax_enable_tax_calculation, input#wc_avatax_enable_address_validation").change(function(a){var t=u(this).parents("tr").nextAll("tr");return u(this).attr("checked")?u(t).show():u(t).hide()}).change(),u("#wc_avatax_record_calculations").change(function(a){var t=u(this).parents("tr").next("tr");return u(this).attr("checked")?u(t).show():u(t).hide()}).change(),u("select#wc_avatax_tax_locations").change(function(a){u(this).parents("tr").nextAll("tr");return"specific"===u(this).val()?u(this).parent().parent().next("tr").show():u(this).parent().parent().next("tr").hide()}).change(),u("select#wc_avatax_origin_address_country").change(function(a){var t,e=u(this).parents("p").next("p");return"US"===(t=u(this).val())||"CA"===t?u(e).show():u(e).hide()}).change(),u("select#wc_avatax_calculate_on_cart").on("change",function(a){var t=u("#wc_avatax_calculate_on_cart_international_customers").closest("tr");return"yes"===u(this).val()?t.show():t.hide()}).trigger("change"),u("button.wc-avatax-address-validate").on("click",function(a){var t,e,n,i,c,r,s,o,d,l;return a.preventDefault(),t=u(this),s=u(t).siblings(".indicator"),n=u(t).parents(".forminp-address"),r=u(n).attr("data-address-id"),o=u(n).find("#"+r+"_address_1").val(),e=u(n).find("#"+r+"_city").val(),l=u(n).find("#"+r+"_state").val(),d=u(n).find("#"+r+"_postcode").val(),i=u(n).find("#"+r+"_country").val(),u(n).find("input, select").prop("disabled",!0),u(t).prop("disabled",!0),s.removeClass(),s.addClass("indicator spinner is-active"),c={line1:o,city:e,region:l,postcode:d,country:i,nonce:_.address_nonce,action:"wc_avatax_validate_origin_address"},jQuery.post(_.ajax_url,c,function(a){if(0!==a)return s.removeClass("spinner is-active"),u(n).find("#message").hide(),200===a.code?(u.each(a.address,function(a,t){return u("#"+r+"_"+a).val(t)}),s.addClass("dashicons dashicons-yes")):u(n).prepend('<div id="message" class="error notice is-dismissible"><p>'+a.error+"</p></div>"),u(n).find("input, select").prop("disabled",!1),u(t).prop("disabled",!1)})}),u("#the-list").on("click",".editinline",function(a){var t,e,n,i=u(this).closest("tr").attr("id");return i=i.replace("post-",""),n=(e=u("#wc_avatax_inline_"+i)).find(".tax_code").text(),t=e.find(".hts_code").text(),u('input[name="_wc_avatax_code"]').val(n),u('input[name="_wc_avatax_hts_code"]').val(t)}),u(".wc-avatax-landed-cost-edit-classes").on("click",".wc-avatax-landed-cost-table-add-row",function(a){var t,e;return a.preventDefault(),(t=(e=u(this).parents("table").find("tbody")).find("tr").last().clone()).find("input").val(""),t.find(".select2").remove(),t.find("select").select2().select2("val","All"),e.append(t),e.find("tr").each(function(n){return u(this).find('[name^="wc_avatax_landed_cost_classes"]').each(function(a,t){var e=u(t).attr("name").replace(/\[.*?\]/,"["+n+"]");return u(t).attr("name",e)})})}),u(".wc-avatax-landed-cost-class-rows").on("click",".wc-avatax-landed-cost-table-remove-row",function(a){var t,e;return a.preventDefault(),t=u(this).parents("tr"),e=u(this).parents("tbody"),t.remove(),e.find("tr").each(function(n){return u(this).find('[name^="wc_avatax_landed_cost_classes"]').each(function(a,t){var e=u(t).attr("name").replace(/\[.*?\]/,"["+n+"]");return u(t).attr("name",e)})})}),u("#woocommerce-order-items").on("change","input.refund_line_total",function(a){var t=u(this).closest("tr"),e=u(this).val(),n=u(t).find("input.wc_avatax_refund_line_rate").val();return u(t).find('input.refund_line_tax[data-tax_id="avatax"]').val(parseFloat(r.formatNumber(e*n,c.rounding_precision,"")).toString().replace(".",i.mon_decimal_point)).change()}),"yes"===u('#woocommerce-order-items input[name="wc_avatax_calculated"]').val())return u("div.wc-order-refund-items .refund-actions").before('<div class="wc-avatax-refund-warning notice notice-warning">'+_.refund_ays+"</div>")})}).call(void 0);