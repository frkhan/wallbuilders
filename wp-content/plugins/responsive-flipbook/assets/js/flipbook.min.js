
(function(){var b=document.getElementsByTagName("HTML")[0];var a=navigator.userAgent.toLowerCase();a=a.indexOf("msie")!=-1?parseInt(a.split("msie")[1]):false;if(a==9){b.className+=" ie9"}})();if(typeof convertHex!="function"){function convertHex(f,c){c=c==""?75:c;var e,d,a;f=f.replace("#","");c=c>1?c/100:c;e=parseInt(f.substring(0,2),16);d=parseInt(f.substring(2,4),16);a=parseInt(f.substring(4,6),16);return"rgba("+e+","+d+","+a+","+c+")"}}jQuery.extend(jQuery.easing,{easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a}});(function(f){var d=f(".rfbwp-shelf").length>0;var e=f(".rfbwp-popup-book").length>0;function c(i,h){var g=h.find(".flipbook.rfbwp-init").first();var j=f(".flipbook").length-1;if(g.length){d=f(".rfbwp-shelf").length>0;e=f(".rfbwp-popup-book").length>0;a(j,g);g.removeClass("rfbwp-init");g.parent().addClass("rfbwp-inited");f(window).trigger("rfbwp.refocus-flipbook")}}function b(){f(".flipbook.rfbwp-init").each(function(h){d=f(".rfbwp-shelf").length>0;e=f(".rfbwp-popup-book").length>0;var g=f(this);a(h,g);g.removeClass("rfbwp-init");g.parent().addClass("rfbwp-inited")})}function a(Q,v){var g=[],L=3,S=2,N=2000,M,s=true;var R=false,z=false,q="ontouchstart" in window,G=0,H=0,o="right",J=false,E=false,w=false,P=f(window),A=f("html, body");if(window.rfbwp_ie_8!=undefined){R=true}if(P.width()<=769){z=true}function i(){var X=C(),V,W=/^\d+$/;if(X===0){X=1}if(W.test(X)){V=X}else{V=1}return V}function F(){return window.location.href.split("#").shift()}function p(){return window.location.hash.slice(1)}function C(){var Y=p(),W="fb"+Q,X;if(Y.indexOf(",")!=-1){Y=Y.split(",");for(var V=0;V<Y.length;V++){if(Y[V].search(W)!=-1){X=Y[V].replace(W+"=","")}}}else{if(Y!=""){if(Y.indexOf(W)!=-1){X=Y.replace(W+"=","")}else{X=0}}else{X=0}}return X}function U(Y){var X=p(),W="fb"+Q;if(X.indexOf(",")!=-1){X=X.split(",");for(var V=0;V<X.length;V++){if(X[V].search("fb"+Q)!=-1){X[V]=W+"="+Y}}X=X.join(",")}else{if(X!=""){if(X.indexOf(W)!=-1){X=W+"="+Y}else{X+=","+W+"="+Y}}else{X=W+"="+Y}}return X}function T(V){var X=V.turn("page"),W;if(X%2!=0){W=F()+"#"+U(X)}else{if(X==V.data().totalPages){W=F()+"#"+U(X)}else{W=F()+"#"+U(X+1)}}if(!d&&!e){window.location.href=W}}function D(Y,X){var Z=C(),V=Y.position();Z=parseInt(Z);if(Z==0||(Z==Y.turn("page")&&Z!=Y.data().totalPages)){return}var W=Y.siblings(".rfbwp-cover-wrap");if(W.length){if(Z==Y.data().totalPages){W.parent().attr("data-display","back")}else{W.parent().attr("data-display","inside");W.filter(".rfbwp-front").children(".rfbwp-cover").addClass("rfbwp-active")}W.addClass("rfbwp-both").removeClass("rfbwp-left");Y.data().fauxCenter=true;if(!z){Y.turn("updateOptions",{cornerSize:100})}}if(Y.data().opt.force_open){Z=Math.max(Math.min(Z,Y.data().totalPages-1),3)}w=true;if(Z==Y.data().totalPages){Y.turn("page",Z)}else{if(Z%2!=0){Y.turn("page",Z)}else{Y.turn("page",(Z+1))}}}function x(V){V.find("div.even div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>');V.find("div.odd div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>');V.find("div.last div.fb-page").prepend('<div class="fb-inside-shadow-left"></div>');V.find("div.first div.fb-page").prepend('<div class="fb-inside-shadow-right"></div>');V.find("div.even div.fb-page").prepend('<div class="fb-page-edge-shadow-left"></div>');V.find("div.odd div.fb-page").prepend('<div class="fb-page-edge-shadow-right"></div>');V.append('<div class="fb-shadow-bottom-left"></div>');V.append('<div class="fb-shadow-bottom-right"></div>');V.append('<div class="fb-shadow-top-left"></div>');V.append('<div class="fb-shadow-top-right"></div>')}function m(Z,ab,Y,W,V){var aa=Y.turn("page"),ac,X=false;if(X){return}if(!isNaN(V)){X=true}if(Z=="start"||X){ac=Y.activePageCorner()}if((Z=="start"&&ac!="tl"&&ac!="bl"&&ac!="tr"&&ac!="br")||(X&&ac!="tl"&&ac!="bl"&&ac!="tr"&&ac!="br")){ac=ab}if(aa+2>=Y.data().totalPages&&(ac=="right"||ac=="tr"||ac=="br")&&Z!="start"){Y.children("div.fb-shadow-top-right").css("opacity",0);Y.children("div.fb-shadow-bottom-right").css("opacity",0)}else{if(aa<=3&&(ac=="left"||ac=="tl"||ac=="bl")&&Z!="start"){Y.children("div.fb-shadow-top-left").css("opacity",0);Y.children("div.fb-shadow-bottom-left").css("opacity",0)}}Y.children("div.fb-shadow-top-left").stop(true);Y.children("div.fb-shadow-bottom-left").stop(true);Y.children("div.fb-shadow-top-right").stop(true);Y.children("div.fb-shadow-bottom-right").stop(true);if(aa==2&&X&&(ac=="tl"||ac=="bl"||ac=="left")){Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}else{if(aa==Y.data().totalPages-2&&X&&(ac=="tr"||ac=="br"||ac=="right")){Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}}if(X){return}if(aa==2&&(ac=="tl"||ac=="bl"||ac=="left")){Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}else{if(aa!=1){Y.children("div.fb-shadow-top-left").animate({opacity:1},500);Y.children("div.fb-shadow-bottom-left").animate({opacity:1},500)}else{Y.children("div.fb-shadow-top-left").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-left").animate({opacity:0},200)}}if(aa==Y.data().totalPages-2&&(ac=="tr"||ac=="br"||ac=="right")){Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}else{if(aa!=Y.data().totalPages){Y.children("div.fb-shadow-top-right").animate({opacity:1},500);Y.children("div.fb-shadow-bottom-right").animate({opacity:1},500)}else{Y.children("div.fb-shadow-top-right").animate({opacity:0},200);Y.children("div.fb-shadow-bottom-right").animate({opacity:0},200)}}}function l(){return Math.abs(window.orientation)==90}function u(ad,aa,W,ae){var X=aa.find(".fb-nav"),Z=X.find(".main-nav"),ac=X.find(".alternative-nav"),ab;if(ae=="zoom"){ab=aa.find(".show-previous, .show-next, .fb-zoom-out")}else{if(ae=="show-all"){ab=aa.find(".show-all-previous, .show-all-next, .show-all-close")}}if(W=="exit"){h(ac,ab,aa);k(ad,Z,aa)}else{t(Z,aa);O(ad,ac,ab,aa,ae)}var Y=aa.find(".fb-nav"),V=aa.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(W=="exit"){if(V&&Y.hasClass("aside")&&!z){Y.css("margin-top",-(Y.height()*0.5)-ad.css("margin-top").replace("px",""))}else{if(Y.hasClass("aside")){Y.css("margin-top",-(Y.height()*0.5))}}}else{if(V&&Y.hasClass("aside")&&!z){Y.css("margin-top",-(Y.find(".alternative-nav").height()*0.75)-ad.css("margin-top").replace("px",""))}else{if(Y.hasClass("aside")){Y.css("margin-top",-(Y.find(".alternative-nav").height()*0.75))}}}}function k(W,aa,Y){var Z=W.turn("page"),V=W.data().totalPages,X=W.data().opt.force_open;aa.css("visibility","visible");aa.stop(true,true).animate({opacity:1},300);if(X){Z=(Z-2<=1)?1:Z;Z=(Z+2>=V)?V:Z}if(!W.data().fauxCenter||X){if(Z==1){Y.find(".preview").css("display","none");Y.find(".next").css("display","inline-block");Y.find(".next").stop(true,true).animate({opacity:1},300)}else{if(Z==V){Y.find(".next").css("display","none");Y.find(".preview").css("display","inline-block");Y.find(".preview").stop(true,true).animate({opacity:1},300)}else{Y.find(".preview, .next").css("display","inline-block");Y.find(".preview, .next").stop(true,true).animate({opacity:1},300)}}}else{Y.find(".preview, .next").css("display","inline-block");Y.find(".preview, .next").stop(true,true).animate({opacity:1},300)}}function t(W,V){W.stop(true,true).animate({opacity:0},300,function(){W.css("visibility","hidden")});V.find(".preview, .next").stop(true,true).animate({opacity:0},300,function(){f(this).css("display","none")})}function O(ac,aa,Z,X,ad){var W=ac.turn("page"),ab=ac.data().totalPages,V=ac.data().opt.force_open,Y=X.find(".fb-nav").data("grouped");aa.find("li").removeClass("active border-single").css({opacity:0});if(!Y){if(ad=="zoom"){aa.find(".fb-zoom-out").addClass("border-single")}else{aa.find(".show-all-close").addClass("border-single")}}Z.addClass("active").stop(true,true).animate({opacity:1},300);if(ad=="zoom"){if(V){W=(W-2<=1)?1:W;W=(W+2>=ab)?ab:W}if(W==1){X.find(".show-previous").removeClass("active");X.find(".show-next").addClass("active");X.find(".show-next").stop(true,true).animate({opacity:1},300)}else{if(W==ab){X.find(".show-next").removeClass("active");X.find(".show-previous").addClass("active");X.find(".show-previous").stop(true,true).animate({opacity:1},300)}else{X.find(".show-previous, .show-next").addClass("active");X.find(".show-previous, .show-next").stop(true,true).animate({opacity:1},300)}}}aa.css("visibility","visible");aa.stop(true,true).animate({opacity:1},300)}function h(W,V){W.stop(true,true).animate({opacity:0},300,function(){W.css("visibility","hidden")});V.stop(true,true).animate({opacity:0},300,function(){V.removeClass("active")})}function r(W,V){W.find(".page-html *:not(.no-scale), .mpc-numeration-wrap span").each(function(){var Y=f(this);if(typeof Y.data("_scale")!="undefined"){var X=Y.data("_scale");if(Y.is("img")){Y.css({width:X.width*V+"px","margin-top":X["margin-top"]*V+"px","margin-right":X["margin-right"]*V+"px","margin-bottom":X["margin-bottom"]*V+"px","margin-left":X["margin-left"]*V+"px","padding-top":X["padding-top"]*V+"px","padding-right":X["padding-right"]*V+"px","padding-bottom":X["padding-bottom"]*V+"px","padding-left":X["padding-left"]*V+"px"})}else{if(Y.parent().hasClass("mpc-numeration-wrap")){Y.css({"font-size":X["font-size"]*V+"px","line-height":X["line-height"]*V+"px","margin-top":X["margin-top"]*V+"px","margin-right":X["margin-right"]*V+"px","margin-bottom":X["margin-bottom"]*V+"px","margin-left":X["margin-left"]*V+"px","padding-top":X["padding-top"]*V+"px","padding-right":X["padding-right"]*V+"px","padding-bottom":X["padding-bottom"]*V+"px","padding-left":X["padding-left"]*V+"px","border-width":X["border-width"]*V+"px","border-radius":X["border-radius"]*V+"px"})}else{Y.css({"font-size":X["font-size"]*V+"px","line-height":X["line-height"]*V+"px"})}}}})}function B(ab,aj,ak,Y,al,X){var ag,ad,W=Y.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap"),ae=Y.find(".fb-nav");ak.turn("size",Math.ceil(ab),Math.ceil(aj));setTimeout(function(){if(Y.find(".rfbwp-cover-wrap").length){var am=(ae.is(".top")?ae.outerHeight():0)+(ae.is(".spread.top")?30:0),an=ae.is(".top")?parseInt(ae.css("margin-top")):parseInt(ak.css("margin-top"));console.log(ak.position().top);Y.find(".rfbwp-cover-wrap").css({width:Math.ceil(ab*0.5)+10,height:aj+20,top:z?an:-10,left:J?0:Y.width()*0.25+15,marginTop:am});if(W&&A.is(".ie9")){Y.find(".rfbwp-cover-wrap").css("margin-top",an>10?an+am:10)}}},250);ag=ab*0.5;ad=aj;if(al){var af=false,aa=Y.find("div.zoomed"),ai=parseInt(aa.css("border-left-width")),ac=Y.offset(),Z=ac.top;if(aa.find("img.bg-img").hasClass("zoom-large")){af=true}if(!af){aa.find("img.bg-img").css({"margin-top":"0px",opacity:1});aa.find("img.bg-img.zoom-large").css("opacity",0)}else{aa.find("img.bg-img").css("display","none");aa.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})}aa.children(":not(.rfbwp-loader)").css("margin-top",0);if(f(this).find("div.fb-page").hasClass("double")){aa.addClass("double")}if(f(this).hasClass("odd")){aa.addClass("odd")}aa.width(ak.width()*0.5*S);aa.height(ak.height()-(ai*2));aa.find(" > div:not(.rfbwp-loader), > a.fb-container, img.bg-img, div.video").each(function(){var am=f(this);if(am.hasClass("video")){}else{if(aa.hasClass("double")){am.width(100*S+"%");am.height(ak.find("div.first").height()*S)}else{am.width(ak.find("div.first").width()*S);am.height(ak.find("div.first").height()*S)}}});var ah=aj/X*S*0.999;r(aa,ah);Y.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px");Y.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"});var V="";if(ae.hasClass("top")){V=ae.outerHeight();V=ae.hasClass("spread")?V+30:V}aa.css({left:(Y.width()-aa.outerWidth())*0.5,top:V});Y.find("div.zoomed-shadow").css({left:(parseInt(aa.css("left"))+ai),top:(parseInt(aa.css("top"))+ai)+V,width:aa.css("width")-20,height:aa.css("height")-20});Y.find("div.zoomed-shadow-top").css({left:(parseInt(aa.css("left"))+ai)+V,width:aa.css("width")});Y.find("div.zoomed-shadow-bottom").css({left:(parseInt(aa.css("left"))+ai)+V,top:aa.height()-40+ai*2+V,width:aa.css("width")})}ak.find("div.fb-page-content").each(function(){var an=f(this);an.width(ag-parseInt(an.css("margin-top")));an.height(ad-(parseInt(an.css("margin-top"))*2));if(an.find("object, iframe").length){an.find(".preview-content").height("100%")}if(an.parent().hasClass("double")){if(an.parent().parent().parent().hasClass("odd")){var am=parseInt(an.css("margin-right"));an.find("img.bg-img").css("margin-left",-an.width()+"px");an.find(".fb-container img.bg-img").css("margin-left","0px")}}an.parent().find("div.fb-inside-shadow-left").height(an.height());an.parent().find("div.fb-inside-shadow-right").height(an.height());an.parent().find("div.fb-page-edge-shadow-left").height(an.height());an.parent().find("div.fb-page-edge-shadow-right").height(an.height())});ak.find("div.fb-shadow-bottom-left").width(ab*0.5);ak.find("div.fb-shadow-bottom-right").width(ab*0.5);ak.find("div.fb-shadow-top-left").width(ab*0.5);ak.find("div.fb-shadow-top-right").width(ab*0.5);if(R&&!s){Y.find("div.preview, div.next").css("top",ak.find("div.turn-page-wrapper.first").height()-ae.outerHeight())}else{if(ae.hasClass("aside")){Y.find("div.preview, div.next").css("top",(ak.find("div.turn-page-wrapper.first").height()-ae.find(".main-nav li").outerHeight())*0.5)}else{Y.find("div.preview, div.next").css("top",(ak.find("div.turn-page-wrapper.first").height()-ae.outerHeight())*0.5)}}}function I(ab,ad,X,V){if(!J){return}var Y=ad.data().done,W=ad.width(),ac=W*0.5,Z=0,aa=X.find(".rfbwp-cover-wrap").length,ae={duration:(!Y)?0:600,easing:"easeOutExpo",complete:function(){ad.turn("resize")}};ad.stop(true);if(V=="left"||ab==1){Z=Math.floor((X.width()-ac)*0.5)-ac}else{Z=Math.floor((X.width()-ac)*0.5)}if(aa){X.find(".rfbwp-front, .rfbwp-back").animate({left:Z+ac},ae)}if(parseInt(ad.css("left"))!=Z){ad.animate({left:Z},ae)}}function n(ab,an,ac,ah){var ao=an.data().done,ai=an.width(),am=ai*0.5,Z=Math.floor((ac.width()-am)*0.5),ak=ac.find(".rfbwp-cover-wrap").length,ag=ac.find(".fb-page-content").hasClass("zoomed"),Y={duration:(!ao)?0:600,easing:"easeOutExpo"};if(ak&&!an.data().fauxCenter){ac.find("li.zoom").css("display","none")}else{ac.find("li.zoom").css("display","inline-block")}an.stop(true,true);if(E){E=false;Y.duration=0}if(J){if(o=="right"||ab==1){Z-=am}if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y);m("center",ah,an,ac,Math.floor((ac.width()-am)*0.5)-am)}if(ac.find(".rfbwp-front, .rfbwp-back").length){ac.find(".rfbwp-front, .rfbwp-back").css({left:Z+am})}}else{if(an.data().fauxCenter){if(ab==1){ab=2}else{if(ab==an.data().totalPages){ab=an.data().totalPages-1}}}if((ab==1||ab==an.data().totalPages)){if(ab==1){Z-=am}if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y);m("center",ah,an,ac,Math.floor((ac.width()-am)*0.5)-am)}}else{Z=Math.floor((ac.width()-ai)*0.5);if(parseInt(an.css("left"))!=Z){an.stop(true).animate({left:Z},Y)}m("center",ah,an,ac,Math.floor((ac.width()-ai)*0.5))}if(ac.find(".rfbwp-front, .rfbwp-back").length){ac.find(".rfbwp-front, .rfbwp-back").stop(true).animate({left:Z+am},Y)}}var al,aa,aj,W;if(R&&!s){al=Z+ai;aa=Z;aj=Z+ai;W=Z}else{al=Z+ai;aa=Z;aj=Z+ai;W=Z}var ad=ac.find(".fb-nav").hasClass("spread")?Math.floor(ac.find("div.preview").outerWidth()*0.33)+28:8,af=an.data().totalPages,V=an.data().opt.force_open;if(V){ab=(ab-2<1)?1:ab;ab=(ab+2>=af)?af:ab}ad=ac.hasClass("nav-with-cover")?ad+10:ad;if((ab==1&&!an.data().fauxCenter)||(ab<=3&&V)){ac.find(".preview, .show-previous").css({opacity:0});ac.find(".preview").css({display:"none"});ac.find(".show-previous").removeClass("active");ac.find("div.preview").stop(true,true).animate({left:W-ac.find("div.preview").outerWidth()+Math.floor(ac.find("div.preview").outerWidth()*0.33)-ad},300,"easeOutExpo")}else{ac.find("div.preview").stop(true,true).animate({left:aa-ac.find("div.preview").outerWidth()+Math.floor(ac.find("div.preview").outerWidth()*0.33)-ad},300,"easeOutExpo");if(!ag){ac.find(".preview").css({display:"inline-block"}).animate({opacity:1},300,"easeOutExpo")}if(ag){ac.find(".show-previous").addClass("active").css({opacity:1})}}if(ab==af){ac.find(".next, .show-next").css({opacity:0});ac.find(".next").css({display:"none"});ac.find(".show-next").removeClass("active");ac.find("div.next").stop(true,true).animate({left:aj-Math.floor(ac.find("div.next").outerWidth()*0.33)+ad},300,"easeOutExpo")}else{ac.find("div.next").stop(true,true).animate({left:al-Math.floor(ac.find("div.next").outerWidth()*0.33)+ad+"px"},300,"easeOutExpo");if(!ag){ac.find(".next").css({display:"inline-block"}).animate({opacity:1},300,"easeOutExpo")}if(ag){ac.find(".show-next").addClass("active").css({opacity:1})}}var X=ac.find(".fb-nav"),ae=ac.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(ae&&X.hasClass("aside")&&!z){X.css("margin-top",-(X.height()*0.5))}else{if(X.hasClass("aside")){X.css("margin-top",-(X.height()*0.5))}}}function K(W,V){P.trigger("rfbwp.resize");m("turned","false",W,V,"first run");V.find(".fb-nav").animate({opacity:1},1000,"easeOutExpo");W.parent().css("background-image","none");W.find(".bg-img").css("visibility","visible");if(R){f(".page-transition").parent().addClass("page-transitions");W.turn("disable")}}function y(V){V.find("div.fb-shadow-bottom-left").stop(true).css("opacity",0);V.find("div.fb-shadow-top-left").stop(true).css("opacity",0);V.find("div.fb-shadow-bottom-right").stop(true).css("opacity",0);V.find("div.fb-shadow-top-right").stop(true).css("opacity",0)}function j(ah){var aQ=ah,ar=aQ.parent(),aw=ar.find("div.fb-nav"),aF=ar.find(".fb-zoom-out"),ad=f('<div id="rfbwp_fullscreen">'),aY=ar.parent(),at=false,aD=false,V=false,ap="false",ao=0,ay,ag,aX=false,ax=false,an=false,aV="ontouchstart" in document.documentElement,aS,aN,ak,am,Y=false,aE=true,aO=ar.data("turn-sound");if(aO){f.ionSound({sounds:[{name:"turn"}],volume:0.3,path:mpcthLocalize.soundsPath,preload:true})}ad.on("touchmove",function(a1){a1.preventDefault()});L=parseInt(aw.find(".toc").attr("data-toc-index"));aQ.on("click",".toc a",function(a1){a1.preventDefault();var a3=f(this).data("page"),a2=F()+"#"+U(a3);if(!d&&!e){window.location.href=a2}else{aQ.turn("page",a3)}});if(R){ar.addClass("ie_fallback")}if(aQ.is(".no-arrows")){s=false}ar.after(ad);aQ.on("faux-turning",function(a2,a1){n(a1,aQ,ar,ap)});aQ.on("turning",function(a2,a1){if(a1==1){aQ.children("div.fb-shadow-top-left").addClass("force-hide");aQ.children("div.fb-shadow-bottom-left").addClass("force-hide")}else{aQ.children("div.fb-shadow-top-left").removeClass("force-hide");aQ.children("div.fb-shadow-bottom-left").removeClass("force-hide")}if(a1==aQ.data().totalPages){aQ.children("div.fb-shadow-top-right").addClass("force-hide");aQ.children("div.fb-shadow-bottom-right").addClass("force-hide")}else{aQ.children("div.fb-shadow-top-right").removeClass("force-hide");aQ.children("div.fb-shadow-bottom-right").removeClass("force-hide")}an=true;n(a1,aQ,ar,ap);if(!aD&&aO){f.ionSound.stop("turn");f.ionSound.play("turn")}});aQ.on("turned",function(a3,a1){var a2=f(this);var a4=a2.data().done;if(!w){if(a1%2){o="right"}else{o="left"}}w=false;if(at){M=setTimeout(function(){a2.turn("next");if(aQ.turn("page")+2>=aQ.data().totalPages){at=false;aw.find("ul li.slideshow").removeClass("active");if(ak){setTimeout(function(){aK.click()},X)}m("start","right",aQ,ar,"end")}},X)}m("turned","false",aQ,ar,"end");an=false});aQ.find("div.fb-page").each(function(){var a3=f(this);if(a3.hasClass("double")){var a2=a3.clone(true);if(a2.find(".mpc-numeration-wrap").data("page-number")!==undefined){var a1=a2.find(".mpc-numeration-wrap").data("page-number");a1++;a2.find(".mpc-numeration-wrap").attr("data-page-number",a1).find("span").text(a1)}a2.insertAfter(a3)}});aS=parseInt(i());am=ar.attr("data-force-open")==1;aQ.turn({page:aS,acceleration:true,shadows:!f.isTouch,duration:R?0:500,cornerSize:R?0:100,force_open:am});if(R){aQ.turn("updatePageOptions",{cornerSize:0})}aQ.find("div.turn-page-wrapper").each(function(){var a4=f(this),a1=f(this).attr("page"),a3=aQ.data().totalPages,a5;if(a1==1){a4.addClass("first");a4.find("div.fb-page-content").addClass("first")}else{if(a1==a3){a4.addClass("last");a4.find("div.fb-page-content").addClass("last")}else{if(a1%2==0){a4.addClass("even");a4.find("div.fb-page-content").addClass("even")}else{a4.addClass("odd");a4.find("div.fb-page-content").addClass("odd")}}}if(a1%2!=0&&a1!=1&&a1!=a3){var a2=parseInt(a4.find("div.double div.fb-page-content").css("margin-right"));a4.find("div.double div.fb-page-content img.bg-img").css("margin-left",-a4.width()+a2+"px");a4.find(".fb-container img.bg-img").css("margin-left","0px")}});aQ.find(" > div:last-child > div").each(function(){var a1=f(this);ao++;ay=aQ.data().totalPages;a1.addClass("page-transition");a1.attr("page",ao);if(ao==1){a1.addClass("first")}else{if(ao==ay){a1.addClass("last")}else{if(ao%2==0){a1.addClass("even")}else{a1.addClass("odd")}}}});var aG=aQ.find("div.turn-page-wrapper > div").width(),W=aQ.find("div.turn-page-wrapper > div").height();aQ.find("div.turn-page-wrapper").dblclick(function(bp){var a5=S,bh,br,bs,by,bd=false,bg=f(this),a2=aw.data("grouped");if(R){aQ.turn("updateOptions",{duration:500})}if(at){at=!at;clearTimeout(M);aw.find("ul li.slideshow").removeClass("active")}bh=bg.find("div.fb-page-content").clone(true).addClass("zoomed");bh.append('<div class="rfbwp-loader"><div class="rfbwp-circle-one"></div><div class="rfbwp-circle-two"></div></div>');aQ.parent().prepend(bh).css("opacity",0).animate({opacity:1},500);if(!R){aQ.parent().prepend('<div class="zoomed-shadow"></div>').css("opacity",0).animate({opacity:1},500)}var bo=ar.find(".big-side.show-previous");var bq=ar.find(".big-side.show-next");if(!bq.length){var a7=aw.data("prev-icon").length?aw.data("prev-icon"):"icon-left-open",bc=aw.data("next-icon").length?aw.data("next-icon"):"icon-right-open",bx=aw.hasClass("spread")?"spread":"";if(a2||f(window).width()<=1024){bo=f('<li class="big-side show-previous"><i class="'+a7+'"></i></li>');bq=f('<li class="big-side show-next"><i class="'+bc+'"></i></li>');aw.find(".alternative-nav").prepend(bo);aw.find(".alternative-nav").append(bq)}else{bo=f('<div class="big-side show-previous '+bx+'"><i class="'+a7+'"></i></div>');bq=f('<div class="big-side show-next '+bx+'"><i class="'+bc+'"></i></div>');ar.append(bo);ar.append(bq)}}else{bo.off("click");bq.off("click")}if(z){bo.hide();bq.hide()}var bb=aw.find("ul li[data-text]");if(bb.length){var be=0;bb.each(function(){var bA=f(this);if(be<bA.width()){be=bA.width()}});ar.find(".big-side").width(be).height(be).css("line-height",be+"px")}f(window).width()<=1024?aU(ar):aM(ar);bo.on("click",function(bA){bA.preventDefault()});bq.on("click",function(bA){bA.preventDefault()});bo.one("click",function(bA){aN=bg.prev();bl();if(aN.css("z-index")!=bg.css("z-index")){aQ.turn("updateOptions",{duration:0});aQ.on("turned",bv);aQ.turn("previous");aQ.turn("updateOptions",{duration:600})}else{aN.dblclick()}});bq.one("click",function(bA){aN=bg.next();bl();if(aN.css("z-index")!=bg.css("z-index")){aQ.turn("updateOptions",{duration:0});aQ.on("turned",bv);aQ.turn("next");aQ.turn("updateOptions",{duration:600})}else{aN.dblclick()}});function bv(bB,bA){aQ.off("turned",bv);aN.dblclick()}aQ.animate({opacity:0},500,function(){aQ.css({visibility:"hidden","pointer-events":"none"})});if(ak){if(aQ.turn("page")==1&&!aQ.data().fauxCenter){aB.click()}else{if(aQ.turn("page")==aQ.data().totalPages&&!aQ.data().fauxCenter){aK.click()}else{if(!aQ.data().fauxCenter){aB.click()}}}af.animate({opacity:0},250,function(){af.css("visibility","hidden")})}ar.find("div.next:not(.zoom), div.preview:not(.zoom)").stop(true).fadeOut(300);if(!R){aQ.parent().prepend('<div class="zoomed-shadow-top"></div><div class="zoomed-shadow-bottom"></div>')}bs=parseInt(bh.css("border-left-width"));var ba=ar.offset();br=ba.top;if(bp.pageY==undefined){bp.pageY=br}if(!z){bh.children(":not(.rfbwp-loader)").css("margin-top",br-bp.pageY)}var a4=bh.find("img.bg-img.zoom-large");if(a4.length){bd=true;if(a4.attr("src")!=a4.attr("data-src")){a4.attr("src",a4.attr("data-src"))}}if(!bd){bh.find("img.bg-img").css({"margin-top":"0px",opacity:1});bh.find("img.bg-img.zoom-large").css("opacity",0)}else{bh.find("img.bg-img").css("display","none");bh.find("img.bg-img.zoom-large").css({"margin-top":"0px",opacity:1,display:"block"})}if(f(this).find("div.fb-page").hasClass("double")){bh.addClass("double")}if(f(this).hasClass("odd")){bh.addClass("odd")}var bu=a5;if(z){var a8=ar.width()-20;bu=a8/(G*0.5)}bh.width(aQ.width()*0.5*bu-(bs*2));bh.height(aQ.height()-(bs*2));var bz=(aQ.height()-(bs*2))*bu;bh.find(" > div:not(.rfbwp-loader), > a.fb-container, div.video").each(function(){var bA=f(this);if(bh.hasClass("double")){bA.width("200%")}else{bA.width("100%")}bA.height(bz)});var bi=aQ.height()/H*bu*0.999;r(bh,bi);ar.find("div.zoomed.double.odd img.bg-img").css("margin-left","0px");ar.find("div.zoomed.double img.bg-img").css({left:"0px",right:"0px"});if(!aD){u(aQ,ar,"show","zoom")}aD=true;var bn="";if(aw.hasClass("top")){bn=aw.outerHeight();bn=aw.hasClass("spread")?bn+30:bn}bh.css({left:(ar.width()-bh.outerWidth())*0.5,top:bn});ar.find("div.zoomed-shadow").css("left",(parseInt(bh.css("left"))+bs));ar.find("div.zoomed-shadow").css("top",(parseInt(bh.css("top"))+bs)+bn);ar.find("div.zoomed-shadow").css("width",bh.css("width")-bs*2);ar.find("div.zoomed-shadow").css("height",bh.css("height")-bs*2);var a3=parseInt(bh.css("left").replace("px","")),bt=a3+parseInt(bh.outerWidth()),bw=ar.find("div.show-previous"),a1=ar.find("div.show-next"),a9=ar.find(".fb-nav").hasClass("spread")?bw.outerWidth()*0.33+20:8;a9=ar.hasClass("nav-with-cover")?a9+10:a9;bw.css({left:a3-bw.outerWidth()-a9,"margin-top":-(bw.outerHeight()*(R?1:0.5))});a1.css({left:bt+a9,"margin-top":-(a1.outerHeight()*(R?1:0.5))});var a6=aQ.turn("page"),bf=aQ.data().totalPages;if(am){a6=(a6-2<=1)?1:a6;a6=(a6+2>=bf)?bf:a6}if(a6==1){ar.find(".show-previous").removeClass("active");ar.find(".show-next").addClass("active");ar.find(".show-next").stop(true,true).animate({opacity:1},300)}else{if(a6==bf){ar.find(".show-next").removeClass("active");ar.find(".show-previous").addClass("active");ar.find(".show-previous").stop(true,true).animate({opacity:1},300)}else{ar.find(".show-previous, .show-next").addClass("active");ar.find(".show-previous, .show-next").stop(true,true).animate({opacity:1},300)}}aF.on("click",bj);var bm=bh.outerHeight(),bk=parseInt(bh.css("left"));if(!z&&aV){bh.addSwipeEvents().on("doubletap",function(bA,bB){bj()}).on("swipeleft",function(){if(!bg.is(".last")){bq.click()}}).on("swiperight",function(){if(!bg.is(".first")){bo.click()}})}bh.dblclick(function(){bj()});P.on("closeZoom",bj);function bj(){if(R){aQ.turn("updateOptions",{duration:0})}aQ.css({visibility:"visible","pointer-events":"all"});aQ.stop(true).animate({opacity:1},300,function(){m("turned","false",aQ,ar,"zoom")});if(ak){af.css("visibility","visible").stop(true).animate({opacity:1},300)}bh.animate({opacity:0},300,function(){f(this).remove();aD=false;aw.find("ul li.zoom").trigger("mouseout")});u(aQ,ar,"exit","zoom");aF.off("click",bj);ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()})}function bl(){ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.fb-page-content.zoomed").animate({opacity:0},100,function(){f(this).remove()})}if(!z&&aV){bh.on("touchmove",function(bA){var bB=bA.originalEvent.touches;if(br-bB[0].pageY>-bh.children().height()+bh.height()){bh.find(" > div:not(.rfbwp-loader), > a.fb-container").css("margin-top",br-bB[0].pageY);bh.find("img.bg-img").css("margin-top",br-bB[0].pageY)}else{bh.find("img.bg-img").css("margin-top",-bh.children().height()+bh.height());bh.find(" > div:not(.rfbwp-loader), > a.fb-container").css("margin-top",-bh.children().height()+bh.height())}})}bh.find(" > div:not(.rfbwp-loader), > a.fb-container").css("position","relative");bh.find("img.bg-img").css("left","0px");bh.on("mousemove touchmove",function(bB){var bD=bh.height(),bC=bh.children(":not(.rfbwp-loader)").height(),bA=(bB.type=="touchmove"?bB.originalEvent.touches[0].pageY:bB.pageY);var bE=(-bC+bD)/-bD,bF=0;if((br-bA)*bE>-bC+bD){bF=(br-bA)*bE}else{bF=-bC+bD}bF=Math.max(Math.min(bF,0),bD-bC);bh.find("> div:not(.rfbwp-loader), > a.fb-container").css("margin-top",bF)});by=bh.position();ar.find("div.zoomed-shadow-top, div.zoomed-shadow-bottom").width(bh.width()).animate({opacity:1},500);ar.find("div.zoomed-shadow-top").css({top:by.top-13,left:by.left+bs});ar.find("div.zoomed-shadow-bottom").css({top:by.top+bh.height()-40+(2*bs),left:by.left+bs})});var X=ar.data("slide-delay")?parseInt(ar.data("slide-delay")):2000,aW=0;var av=aw.data("menu-type"),aH=aw.data("grouped"),aI=aw.data("prev-icon"),aj=aw.data("next-icon"),aR="";if(aH){aR={prev:'<li class="preview'+(!s?" hidden":"")+'" data-icon="'+aI+'"></li>',next:'<li class="next'+(!s?" hidden":"")+'" data-icon="'+aj+'"></li>'}}else{aR='<div class="next round'+(!s?" hidden":"")+" "+av+'"><i class="'+aj+'"></i></div><div class="preview round'+(!s?" hidden":"")+" "+av+'"><i class="'+aI+'"></i></div>'}if(s||R){if(aH){aw.find(".main-nav").prepend(aR.prev).append(aR.next)}else{ar.append(aR)}}if(aw.hasClass("mobile")){ar.find(".next, .preview").addClass("mobile")}aw.find("ul li").each(function(){var a4=f(this);if(a4.data("icon")){var a2=a4.data("icon"),a3=a4.data("icon-active");if(a2.length==0){if(a4.hasClass("slideshow")){a4.append('<i class="icon-play"></i><i class="icon-pause"></i>')}else{if(a4.hasClass("toc")){a4.append('<i class="icon-list"></i>')}else{if(a4.hasClass("zoom")){a4.append('<i class="icon-search"></i>')}else{if(a4.hasClass("show-all")){a4.append('<i class="icon-layout"></i>')}else{if(a4.hasClass("fullscreen")){a4.append('<i class="icon-resize-full"></i><i class="icon-resize-small"></i>')}}}}}}else{a4.append('<i class="'+a2+'"></i>')}if(a3&&a3.length>0){a4.append('<i class="'+a3+'"></i>')}}else{if(a4.data("text")){var a5=a4.data("text"),a1=a4.data("text-active");a4.append('<i class="text">'+a5+"</i>");if(a1&&a1.length>0){a4.append('<i class="text">'+a1+"</i>")}}}});var ab=aw.find("ul li[data-text]");if(ab.length){var aq=0;ab.each(function(){var a1=f(this);if(aq<a1.width()){aq=a1.width()}});ab.width(aq).height(aq).css("line-height",aq+"px");ar.find(".next, .preview, .show-next, .show-previous, .show-all-next, .show-all-previous").width(aq).height(aq).css("line-height",aq+"px")}aw.find("ul li.toc").on("click",function(a1){if(aQ.turn("page")!=L){aQ.trigger("mouseover")}if(ak&&!aQ.data().fauxCenter){if(aB.parent().is(".rfbwp-left")){aB.click()}else{aK.click()}setTimeout(function(){aQ.turn("page",L);y(aQ)},300)}else{aQ.turn("page",L);y(aQ)}});function aP(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen()}else{if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen()}else{if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen()}else{if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}}aw.find("ul li.fullscreen").on("click",function(a4){aP();var a3=f(this),a2=ar.siblings(".fb-spacer").length?ar.siblings(".fb-spacer"):ar.before('<div class="fb-spacer"></div>').siblings(".fb-spacer");a3.toggleClass("active");V=!V;E=true;if(V){var a1=ar.data("fullscreen").split("|");a2.css({width:ar.outerWidth(),height:ar.outerHeight()});if(f.isArray(a1)){ad.css({background:convertHex(a1[0],a1[1])});ad.find(".rfbwp-close").attr("data-reverse",a1[2])}else{ad.removeAttr("style");ad.find(".rfbwp-close").removeAttr("data-reverse")}ad.show();a2.show();ad.append(ar);A.css("overflow","hidden");P.trigger("rfbwp.resize")}else{ar.insertBefore(ad);ar.siblings(".fb-spacer").remove();ad.hide();A.css("overflow","");P.trigger("rfbwp.resize")}});P.on("keydown",function(a1){if(a1.keyCode==27&&V){aw.find("ul li.fullscreen").click()}});aw.find("ul li.download").on("click",function(a3){var a2=f(this),a1=a2.attr("data-file");if(!a1.length>0){return}window.location.href=mpcthLocalize.downloadPath+a1});aw.find("ul li.zoom").on("click",function(a1){aQ.find("div.turn-page-wrapper").each(function(){var a2=f(this);if(a2.attr("page")==aQ.turn("page")&&!aD){a2.trigger("dblclick")}else{if(a2.attr("page")==aQ.turn("page")&&aD){ar.find("div.zoomed").trigger("dblclick")}}})});aw.find("ul li.slideshow").on("click",function(a2){if(aQ.turn("page")==aQ.data().totalPages){return}var a1=f(this);a1.toggleClass("active");at=!at;if(at){if(ak&&!aQ.data().fauxCenter){aB.click();setTimeout(function(){clearTimeout(M);aQ.turn("next")},X)}else{clearTimeout(M);aQ.turn("next")}}else{clearTimeout(M)}m("start","right",aQ,ar,"end")});aw.find("ul li.show-all").on("click",function(bC){var by=aQ.height(),bq=aQ.width()*(J?0.5:1),bc=12,bu,bj,bk,a8,bg=6,bB=1,a7=10,bl,ba,bi,bx,bf=parseInt(f(this).attr("data-cols")),br=aw.data("grouped"),a6;Y=true;if(isNaN(bf)||bf==0){bf=2}else{bf*=2}var bn=parseInt(aQ.find(".fb-page-content").css("margin-top"));bx=(G-2*bn)*0.5/(H-bn);aQ.turn("stop");ar.append('<div class="show-all"><div class="content"></div><div class="rfbwp-trim-top"></div><div class="rfbwp-trim-bottom"></div></div>');ar.append('<div class="showall-shadow-top"></div><div class="showall-shadow-bottom"></div>');var bo=ar.find("div.show-all"),bD=ar.find(".show-all-next, .show-all-previous").length,a1=aw.data("up-icon")?aw.data("up-icon"):"fa fa-chevron-up",bb=aw.data("down-icon")?aw.data("down-icon"):"fa fa-chevron-down",a4=aw.hasClass("spread")?"spread":"";if(!bD&&br){aw.find(".alternative-nav").append('<li class="big-next show-all-next"><i class="'+bb+'"></i></li>');aw.find(".alternative-nav").prepend('<li class="big-next show-all-previous"><i class="'+a1+'"></i></li>')}else{if(!bD){ar.append('<div class="big-next show-all-next '+a4+'"><i class="'+bb+'"></i></div>');ar.append('<div class="big-next show-all-previous '+a4+'"><i class="'+a1+'"></i></div>')}}var a3=aw.find("ul li[data-text]");if(a3.length){var bh=0;a3.each(function(){var bF=f(this);if(bh<bF.width()){bh=bF.width()}});ar.find(".big-next").width(bh).height(bh).css("line-height",bh+"px")}f(window).width()<=1024?aU(ar):aM(ar);bB=2;aQ.find("div.fb-page-content").each(function(){var bF=f(this);if(!bF.parent().parent().hasClass("fpage")){bl=bF.clone(true).addClass("show-all-thumb");bl.find("img.bg-img.zoom-large").remove();bl.attr("style","");if(bF.parent().parent().parent().hasClass("last")){bl.addClass("even")}else{if(bF.parent().parent().parent().hasClass("first")){bl.addClass("odd")}}if(bF.parent().hasClass("double")){bl.addClass("double")}if(bF.parent().parent().parent().hasClass("last")){bo.find("div.content").prepend(bl)}else{bo.find("div.content").append(bl)}bB++}});bc=parseInt(bo.find("div.content").css("top"));bu=parseInt(bo.find("div.show-all-thumb").css("margin-bottom"));bj=parseInt(bo.find("div.show-all-thumb.odd").css("margin-right"));bk=parseInt(bo.find("div.show-all-thumb").css("height"));a8=parseInt(bo.find("div.show-all-thumb").css("width"));ba=bk/by;var a2=((bq-bc*2-bj*(bf/2-1))/bf)>>0,a9=(a2/bx)>>0;bo.find("div.show-all-thumb").css({width:a2,height:a9});while(ar.height()<=((bc*2)+(bg*(a9+bu))-bu)){bg--}var bt=bo.find("div.show-all-thumb").length;bg=Math.min(Math.ceil(bt/a7),bg);bi=a9*bg+bc*2+bu*bg-bu;bo.width(bq).height(bi);if(bo.height()>bo.find(".content").height()){ar.find(".show-all-previous, .show-all-next").removeClass("active")}else{ar.find(".show-all-previous, .show-all-next").addClass("active")}a6=(ar.height()-bo.outerHeight()-(aw.hasClass("aside")?0:aw.height()))*0.5;bo.css("top",a6);a7=bf;bB=1;var bp=a9/(H-bn*2);bp*=1.04;bo.find("div.show-all-thumb").each(function(){var bF=f(this);if(bB%a7==0){bF.addClass("last-thumb")}bB++;r(bF,bp);bF.prepend('<span class="shadow"></span>');bF.find("div.video").remove()});aQ.animate({opacity:0},500,function(){aQ.css("visibility","hidden")});if(ak){af.animate({opacity:0},500,function(){af.css("visibility","hidden")})}aQ.css("pointer-events","none");bo.animate({opacity:1},500);bo.css({left:(ar.width()-bo.width())*0.5+"px"});var a5=parseInt(bo.css("left").replace("px","")),bz=a5+parseInt(bo.outerWidth()),bs=ar.find("div.show-all-previous"),bA=ar.find("div.show-all-next"),bd=ar.find(".fb-nav").hasClass("spread")?bs.outerWidth()*0.33+20:0;bd=ar.hasClass("nav-with-cover")?bd+10:bd;bs.css({left:a5-bs.outerWidth()-bd,"margin-top":-(bs.outerHeight())*0.5});bA.css({left:bz+bd,"margin-top":-(bA.outerHeight())*0.5});u(aQ,ar,"show","show-all");bo.find("div.show-all-thumb").hover(function(){var bF=f(this);bF.find("span.shadow");bF.find("span.shadow").stop(true).animate({opacity:0.5},300);if(bF.hasClass("even")){bF.next().find("span.shadow");bF.next().find("span.shadow").stop(true).animate({opacity:0.5},300)}else{bF.prev().find("span.shadow");bF.prev().find("span.shadow").stop(true).animate({opacity:0.5},300)}},function(){var bF=f(this);bF.find("span.shadow").stop(true).animate({opacity:0},300);if(bF.hasClass("even")){bF.next().find("span.shadow");bF.next().find("span.shadow").stop(true).animate({opacity:0},300)}else{bF.prev().find("span.shadow");bF.prev().find("span.shadow").stop(true).animate({opacity:0},300)}});var bv=bo.position();ar.find("div.showall-shadow-top, div.showall-shadow-bottom").width(bo.width()).delay(500).animate({opacity:1},500);ar.find("div.showall-shadow-top").css({top:bv.top-12,left:bv.left});ar.find("div.showall-shadow-bottom").css({top:bv.top+bo.height()-39,left:bv.left});bo.find("div.show-all-thumb").on("click",function(){var bF=f(this),bG=Math.ceil(bF.index());if(ak&&!aQ.data().fauxCenter){aB.click()}if(am&&bG<2){bG=2}aQ.trigger("mouseover");y(aQ);aQ.turn("page",bG);n(bG,aQ,ar,"left");bo.animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").animate({opacity:0},100,function(){f(this).remove()});aQ.css("visibility","visible");aQ.stop(true).animate({opacity:1},300);if(ak){af.css("visibility","visible");af.stop(true,true).animate({opacity:1},300)}u(aQ,ar,"exit","show-all");if(bG<2){aQ.find("div.fb-shadow-bottom-left").css("opacity",0);aQ.find("div.fb-shadow-top-left").css("opacity",0)}aQ.css("pointer-events","all");P.off("keydown",be);Y=false});var bw=bo.find("div.content"),bm=bi-bc*2+bu,bE=false;ar.find(".show-all-previous").on("click",function(){if(parseInt(bw.css("top"))!=bc&&!bE){bE=true;bw.stop(true).animate({top:Math.min((parseInt(bw.css("top"))+bm),bc)},1000,"easeOutExpo",function(){bE=false})}});ar.find(".show-all-next").on("click",function(){if(parseInt(bw.css("top"))-bm>12-bw.height()&&!bE){bE=true;bw.stop(true).animate({top:(parseInt(bw.css("top"))-bm)},1000,"easeOutExpo",function(){bE=false})}});function be(bF){if(bF.keyCode==38){ar.find(".show-all-previous").trigger("click");bF.preventDefault()}else{if(bF.keyCode==40){ar.find(".show-all-next").trigger("click");bF.preventDefault()}else{if(bF.keyCode==27){aw.find(".show-all-close").trigger("click");bF.preventDefault()}}}}P.on("keydown",be);aw.find(".show-all-close").on("click",function(){bo.animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").animate({opacity:0},100,function(){f(this).remove()});aQ.css("visibility","visible");aQ.animate({opacity:1},300);if(ak){af.css("visibility","visible");af.stop(true,true).animate({opacity:1},300)}u(aQ,ar,"exit","show-all");aQ.find("div.fb-shadow-bottom-left").css("opacity",0);aQ.find("div.fb-shadow-top-left").css("opacity",0);aQ.css("pointer-events","all");P.off("keydown",be);Y=false})});if(aw.hasClass("aside")&&!z){aw.css({"margin-top":-(aw.height()*0.5)+"px"});if(aw.hasClass("left")&&ar.parent().is("#rfbwp_fullscreen")){aw.css({left:-aw.width()-80})}else{if(ar.parent().is("#rfbwp_fullscreen")){aw.css({left:ar.width+aw.width()+80})}}}ar.find(".next").on("click",aZ);ar.find(".preview").on("click",aA);function aZ(a2){if(an){return}if(J&&o=="left"){o="right";var a1=aQ.turn("page");I(a1,aQ,ar,"left");return}ap="right";aQ.trigger("mouseover");if(ak){if(aQ.data().fauxCenter){if(aQ.turn("page")==aQ.data().totalPages){aQ.trigger("cover-back")}else{aQ.turn("next")}}else{aQ.trigger("cover-front")}}else{aQ.turn("next")}}function aA(a2){if(an){return}if(J&&o=="right"){o="left";var a1=aQ.turn("page");I(a1,aQ,ar,"right");return}ap="left";aQ.trigger("mouseover");if(ak){if(aQ.data().fauxCenter){if(aQ.turn("page")==1){aQ.trigger("cover-front")}else{aQ.turn("previous")}}else{aQ.trigger("cover-back")}}else{aQ.turn("previous")}}function aU(a2){var bd=a2.find(".fb-nav").data("grouped"),a5=a2.find(".fb-nav").hasClass("consolidated");if(bd){return false}var a1=a2.find(".main-nav"),ba=a2.find(".alternative-nav"),bc=a2.find("div.next"),bb=a2.find("div.preview"),bf=a2.find("div.show-next"),be=a2.find("div.show-prev"),a7=a2.find("div.show-all-next"),a6=a2.find("div.show-all-previous");a2.find(".fb-nav").addClass("consolidated");if(bc.length&&bb.length){var bi='<li class="next'+(!s?" hidden":"")+'">'+bc.html()+"</li>",bg='<li class="preview'+(!s?" hidden":"")+'">'+bb.html()+"</li>";bc.addClass("_next").removeClass("next").hide();bb.addClass("_preview").removeClass("preview").hide();if(!a1.find("li.next, li.preview").length){a1.prepend(bg).append(bi)}a1.find(".preview").on("click",aA);a1.find(".next").on("click",aZ)}if(bf.length&&be.length){var a9='<li class="big-side show-next">'+bf.html()+"</li>",a8='<li class="big-side show-previous">'+be.html()+"</li>";bf.addClass("_show-next").removeClass("show-next").hide();be.addClass("_show-previous").removeClass("show-previous").hide();if(!ba.find("li.show-next, li.show-previous").length){ba.prepend(a8).append(a9)}}if(a7.length&&a6.length){var bj='<li class="big-next show-all-next">'+a7.html()+"</li>",bh='<li class="big-next show-all-previous">'+a6.html()+"</li>";a7.addClass("_show-all-next").removeClass("show-all-next").hide();a6.addClass("_show-all-previous").removeClass("show-all-previous").hide();if(!ba.find("li.show-all-next, li.show-all-previous").length){ba.prepend(bh).append(bj)}}var a3=aw.find("ul li[data-text]");if(a3.length){var a4=0;a3.each(function(){var bk=f(this);if(a4<bk.width()){a4=bk.width()}});a2.find(".big-side, .big-next, .next, .preview").width(a4).height(a4).css("line-height",a4+"px")}}function aM(a5){var bh=a5.find(".fb-nav").data("grouped"),a9=a5.find(".fb-nav").hasClass("consolidated");if(bh){return false}if(!a9){return false}var a3=a5.find(".main-nav"),be=a5.find(".alternative-nav"),bg=a5.find("._next"),bf=a5.find("._preview"),bj=a5.find("._show-next"),bi=a5.find("._show-previous"),bb=a5.find("._show-all-next"),ba=a5.find("._show-all-previous");a5.find(".fb-nav").removeClass("consolidated");if(bg.length&&bf.length){var a7=a5.find(".next"),a4=a5.find(".preview");a7.remove();a4.remove();bg.addClass("next").removeClass("_next").show();bf.addClass("preview").removeClass("_preview").show();bg.find(".preview").on("click",aA);bf.find(".next").on("click",aZ)}if(bj.length&&bi.length){var a2=a5.find(".show-next"),a1=a5.find(".show-previous");a2.remove();a1.remove();bj.addClass("show-next").removeClass("_show-next").show();bi.addClass("show-previous").removeClass("_show-previous").show()}if(bb.length&&ba.length){var bd=a5.find(".show-all-next"),bc=a5.find(".show-all-previous");bd.remove();bc.remove();bb.addClass("show-all-next").removeClass("_show-all-next").show();ba.addClass("show-all-previous").removeClass("_show-all-previous").show()}var a6=aw.find("ul li[data-text]");if(a6.length){var a8=0;a6.each(function(){var bk=f(this);if(a8<bk.width()){a8=bk.width()}});a5.find(".big-side, .big-next, .next, .preview").width(a8).height(a8).css("line-height",a8+"px")}}function aL(a2,a1){if(!z){aQ.turn("updateOptions",{cornerSize:100})}if(a2==1){if(a1=="open"){af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both");setTimeout(function(){aB.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")},150)}else{af.removeClass("rfbwp-left rfbwp-both rfbwp-right");af.addClass("rfbwp-left");aQ.turn("updateOptions",{cornerSize:1});setTimeout(function(){aB.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")},150)}}else{if(a2==aQ.data().totalPages){if(a1=="open"){af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both");setTimeout(function(){aK.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")},150)}else{af.removeClass("rfbwp-left rfbwp-both");af.addClass("rfbwp-right");aQ.turn("updateOptions",{cornerSize:1});setTimeout(function(){aK.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")},150)}}else{af.removeClass("rfbwp-left rfbwp-right");af.addClass("rfbwp-both")}}}function aa(a1){if(a1==1){ar.attr("data-display","front")}else{if(a1==aQ.data().totalPages){ar.attr("data-display","back")}else{ar.attr("data-display","inside")}}}function ai(a1){aT=f(this);az=aT.parent().is(".rfbwp-front")?"front":"back";if(aT[0]==aB[0]&&aQ.turn("page")!=1){return}if(aT[0]==aK[0]&&aQ.turn("page")!=aQ.data().totalPages){return}if(aT[0]==aB[0]&&aQ.data().fauxCenter){P.trigger("rfbwp-disable-corners")}if(aT[0]==aK[0]&&aQ.data().fauxCenter){P.trigger("rfbwp-disable-corners")}Z=a1.clientX;if(aQ.data().fauxCenter){if(aT[0]==aB[0]){ar.find(".preview").stop(true,true).animate({opacity:0}).css("display","none")}else{ar.find(".next").stop(true,true).animate({opacity:0}).css("display","none")}}P.one("mouseup",al);P.on("mousemove",ae)}function ae(a1){aJ=(a1.clientX-Z)*0.25;if(aT.is(".rfbwp-active")){aJ-=180}if(aJ>0){aJ=0}if(aJ<-180){aJ=-180}if(aJ/90<-1){aT.addClass("rfbwp-side-right").removeClass("rfbwp-side-left")}else{aT.addClass("rfbwp-side-left").removeClass("rfbwp-side-right")}aT.css("transform","rotateY("+aJ+"deg)")}function al(a1){aT.css("transform","");aT.addClass("rfbwp-anim");if(aT[0]==aB[0]&&aQ.data().fauxCenter){P.trigger("rfbwp-update-corners")}if(aT[0]==aK[0]&&aQ.data().fauxCenter){P.trigger("rfbwp-update-corners")}if(aT.is(".rfbwp-active")||aT.is(".rfbwp-back:not(.rfbwp-active)")){if(aJ>-90){aQ.trigger("cover-"+az)}}else{if(aJ<-90){aQ.trigger("cover-"+az)}}setTimeout(function(){aT.removeClass("rfbwp-anim")},300);if(aQ.data().fauxCenter){if(aT[0]==aB[0]){ar.find(".preview").stop(true,true).css("display","inline-block").animate({opacity:1})}else{ar.find(".next").stop(true,true).css("display","inline-block").animate({opacity:1})}}P.off("mousemove",ae)}function ac(){if(aC){return}if(aQ.turn("page")==1){aC=true;aB.addClass("rfbwp-anim");if(aB.is(".rfbwp-active")){aL(aQ.turn("page"),"close");aQ.data().fauxCenter=false;aQ.trigger("faux-turning",[1])}else{aL(aQ.turn("page"),"open");aQ.data().fauxCenter=true;aQ.trigger("faux-turning",[2])}setTimeout(function(){aC=false;aB.removeClass("rfbwp-anim")},600);aB.toggleClass("rfbwp-active")}}function au(){if(aC){return}if(aQ.turn("page")==aQ.data().totalPages){aC=true;aK.addClass("rfbwp-anim");if(!aK.is(".rfbwp-active")){aL(aQ.turn("page"),"close");aQ.data().fauxCenter=false;aQ.trigger("faux-turning",[aQ.data().totalPages])}else{aL(aQ.turn("page"),"open");aQ.data().fauxCenter=true;aQ.trigger("faux-turning",[aQ.data().totalPages-2])}setTimeout(function(){aC=false;aK.removeClass("rfbwp-anim")},600);aK.toggleClass("rfbwp-active").trigger("back-cover-turned")}}function a0(){var a1=(aw.is(".top")?aw.outerHeight():0)+(aw.is(".spread.top")?30:0),a2=aw.is(".top")?parseInt(aw.css("margin-top")):parseInt(aQ.css("margin-top"));af.css({width:Math.ceil(aQ.width()*0.5)+10,height:aQ.height()+20,top:z?a2:-10,left:J?0:ar.width()*0.25+15,marginTop:a1});if(A.is(".ie9")){af.css("margin-top",a2>10?a2+a1:10)}}var af=ar.find(".rfbwp-cover-wrap"),aB=ar.find(".rfbwp-front .rfbwp-cover"),aK=ar.find(".rfbwp-back .rfbwp-cover"),aC,aT,Z,aJ,az;if(af.length){ak=true;af.addClass("rfbwp-left");a0();P.on("resize",a0);if(am){aL(3,"open");aa(3);aQ.data().fauxCenter=true}else{aa(1)}aK.addClass("rfbwp-side-left");if(aQ.turn("page")==1){aB.addClass("rfbwp-side-left")}else{aB.addClass("rfbwp-side-right")}aQ.on("cover-front",ac);aQ.on("cover-back",au);aB.on("click",ac);aK.on("click",au);aQ.on("turning",function(a2,a1){aC=true;if(a1!=1&&a1!=aQ.data().totalPages){aa(a1)}});aQ.on("turned",function(a2,a1){aC=false;aa(a1)});aB.on("dragstart",function(a1){a1.preventDefault()});aK.on("dragstart",function(a1){a1.preventDefault()});aB.on("mousedown",ai);aK.on("mousedown",ai);aQ.on("pressed",function(){ar.attr("data-display","inside")});aQ.on("released",function(){if(aQ.turn("page")==1){ar.attr("data-display","front")}else{if(aQ.turn("page")==aQ.data().totalPages){ar.attr("data-display","back")}}})}x(aQ);D(aQ,ar);G=parseInt(aQ.attr("data-fb-w"))*2;H=parseInt(aQ.attr("data-fb-h"));aQ.find("div.fb-page-content .page-html *:not(.no-scale), div.fb-page-content .mpc-numeration-wrap span").each(function(){var a3=f(this);if(a3.is("img")){a3.data("_scale",{width:a3.attr("width")?parseInt(a3.attr("width")):parseInt(a3.width()),"margin-top":parseInt(a3.css("margin-top")),"margin-right":parseInt(a3.css("margin-right")),"margin-bottom":parseInt(a3.css("margin-bottom")),"margin-left":parseInt(a3.css("margin-left")),"padding-top":parseInt(a3.css("padding-top")),"padding-right":parseInt(a3.css("padding-right")),"padding-bottom":parseInt(a3.css("padding-bottom")),"padding-left":parseInt(a3.css("padding-left"))})}else{if(a3.parent().hasClass("mpc-numeration-wrap")){a3.data("_scale",{"font-size":parseInt(a3.css("font-size")),"line-height":parseInt(a3.css("line-height")),"margin-top":parseInt(a3.css("margin-top")),"margin-right":parseInt(a3.css("margin-right")),"margin-bottom":parseInt(a3.css("margin-bottom")),"margin-left":parseInt(a3.css("margin-left")),"padding-top":parseInt(a3.css("padding-top")),"padding-right":parseInt(a3.css("padding-right")),"padding-bottom":parseInt(a3.css("padding-bottom")),"padding-left":parseInt(a3.css("padding-left")),"border-width":parseInt(a3.css("border-width")),"border-radius":parseInt(a3.css("border-radius"))})}else{var a1=parseInt(a3.css("font-size")),a2=a3.css("line-height");if(a2.indexOf("px")==-1){a2*=a1}a3.data("_scale",{"font-size":a1,"line-height":parseInt(a2)})}}});aQ.find("div.fb-page-content .page-html .rfbwp-page-link").on("click",function(a1){a1.preventDefault();var a2=f(this),a3=parseInt(a2[0].hash.replace("#",""),10);if(!isNaN(a3)){a3=Math.min(aQ.data().totalPages,Math.max(a3,0));aQ.turn("page",a3)}});aQ.on("turned",function(a3,a2,a1){T(aQ);return false});aQ.on("turning",function(a2,a1){var a3=a1%2?"left":"right";if(J){I(a1,aQ,ar,a3)}});aQ.find("div.turn-page-wrapper.even").addSwipeEvents().on("swipeleft",function(a2,a3){if(J){o="right";var a1=aQ.turn("page");I(a1,aQ,ar,"left")}});aQ.find("div.turn-page-wrapper.odd").addSwipeEvents().on("swiperight",function(a2,a3){if(J){o="left";var a1=aQ.turn("page");I(a1,aQ,ar,"right")}});aQ.on("rfbwp.close",function(){if(ar.find("div.show-all").length){ar.find(".alternative-nav .show-all-close").trigger("click")}ap="left";aQ.children("div.fb-shadow-top-right").animate({opacity:0},200).addClass("_fb-shadow-top-right").removeClass("fb-shadow-top-right");aQ.children("div.fb-shadow-bottom-right").animate({opacity:0},200).addClass("_fb-shadow-bottom-right").removeClass("fb-shadow-bottom-right");aQ.children("div.fb-shadow-top-left").animate({opacity:0},200).addClass("_fb-shadow-top-left").removeClass("fb-shadow-top-left");aQ.children("div.fb-shadow-bottom-left").animate({opacity:0},200).addClass("_fb-shadow-bottom-left").removeClass("fb-shadow-bottom-left");var a1=0;if(ak){if(!aQ.data().fauxCenter){if(aQ.turn("page")==aQ.data().totalPages){a1+=1600;aQ.trigger("cover-back");setTimeout(function(){ar.attr("data-display","inside");aQ.one("turned",function(){aQ.trigger("cover-front")});aQ.turn("page",1)},500)}}else{if(aQ.data().fauxCenter){if(aQ.turn("page")==1){a1+=500;aQ.trigger("cover-front")}else{a1+=1100;ar.attr("data-display","inside");aQ.one("turned",function(){aQ.trigger("cover-front")});aQ.turn("page",1)}}}}else{if(aQ.turn("page")==aQ.data().totalPages){a1+=1200;aQ.trigger("mouseover");aQ.turn("previous");aQ.one("turned",function(){ap="left";aQ.trigger("mouseover");aQ.turn("page",1)})}else{if(aQ.turn("page")!=1){a1+=600;aQ.turn("page",1)}}}setTimeout(function(){P.trigger("rfbwp.closed");aQ.children("div._fb-shadow-top-right").addClass("fb-shadow-top-right").removeClass("_fb-shadow-top-right");aQ.children("div._fb-shadow-bottom-right").addClass("fb-shadow-bottom-right").removeClass("_fb-shadow-bottom-right");aQ.children("div._fb-shadow-top-left").addClass("fb-shadow-top-left").removeClass("_fb-shadow-top-left");aQ.children("div._fb-shadow-bottom-left").addClass("fb-shadow-bottom-left").removeClass("_fb-shadow-bottom-left")},a1);if(aD){-P.trigger("closeZoom")}});P.on("rfbwp.resize resize",function(){var a4=f(this),a8=aQ.turn("page"),bc=a4.width(),bf=ar.find("div.next"),bd=ar.find("div.preview"),a6,a3,bb,bj,bg,a9,bh,ba,be=parseInt(aw.css("top"))+aw.outerHeight()+40,a2=aQ.outerHeight()+be,bk=aQ.position(),a7=ar.parent().is("#rfbwp_fullscreen, .rfbwp-shelf-wrap, .rfbwp-popup-wrap");if(bc<=768){z=true;s=false;bf.hide();bd.hide();aQ.turn("updateOptions",{cornerSize:1});ar.css("overflow","hidden")}else{z=false;if(aQ.turn("page")==1&&ak){aQ.turn("updateOptions",{cornerSize:1})}else{aQ.turn("updateOptions",{cornerSize:100})}ar.css("overflow","");if(!aQ.is(".no-arrows")&&!aD){s=true;bf.show();bd.show()}}f(window).width()<=1024?aU(ar):aM(ar);var bl=aw.hasClass("top")?aw.height():"0";bl=aw.hasClass("spread")?bl+30:bl;bf.css("margin-top",bl);bd.css("margin-top",bl);if(a7&&z&&P.width()>P.height()){aw.find("li").css({"margin-bottom":aw.find("li").css("margin-right")});aw.removeClass("bottom").addClass("aside").removeClass("_aside")}else{if(aw.hasClass("_aside")){aw.addClass("bottom").removeClass("aside").addClass("_aside").css({"margin-top":"","margin-bottom":""})}else{if(aw.hasClass("aside")&&z){aw.removeClass("aside").addClass("mobile-aside")}else{if(!z&&aw.hasClass("mobile-aside")){aw.removeClass("mobile-aside").addClass("aside")}}}}ba=aw.is(".aside")?0:aw.outerHeight()+(aw.is(".spread")?20:0);a3=G;bb=H;bj=ar.width()-(ak?20:0);bg=ar.parent().height()-ba-(ak?20:0);a9=P.height()-ba-(ak?20:0);if(bg>a9||!a7){bg=a9}if(a3>bj){var bi=bj/a3;a3=a3*bi>>0;bb=bb*bi>>0}J=false;if(a3*1.25<G&&bj<600){J=true;a3=a3*2;bb=bb*2}if(bb>bg){a6=a3/bb;a3=bg*a6>>0;bb=bg>>0}if(a3%2==1){a3-=1}if(z&&a3<G*0.5){aw.find("ul li.zoom").css("display","none")}else{aw.find("ul li.zoom").css("display","block")}if(z){aw.find("ul li.fullscreen").remove()}if(a7&&bb<=ad.height()){var a5=(a9-bb-60+(ak?20:0))*0.5-(z?10:0);if(aw.hasClass("top")){aw.css("margin-top",a5)}else{aQ.css("margin-top",a5)}if(A.is(".ie9")){ar.find("div.preview, div.next").css("top",bb*0.5+a5);if(ak){a0()}}}else{if(aw.hasClass("top")){aw.css("margin-top",0)}else{aQ.css("margin-top",0)}}if(a3!=aQ.width()||bb!=aQ.height()){B(a3,bb,aQ,ar,aD,H)}bh=aQ.height()/H;r(aQ,bh);bc=a4.width();if((a8==1||a8==aQ.data().totalPages)&&!aQ.data().fauxCenter){var a1=Math.floor((ar.width()-aQ.width()*0.5)*0.5);if(a8==1){a1-=aQ.width()*0.5}}else{var a1=Math.floor((ar.width()-aQ.width())*0.5)}if(parseInt(aQ.css("left"))!=a1){aQ.css("left",a1)}if(ak){af.css("left",J?0:a1+a3*0.5)}if(aD){if(aQ.turn("page")==1){a1+=a3*0.25}else{if(aQ.turn("page")==aQ.data().totalPages){a1-=a3*0.25}}ar.children("div.zoomed").css({left:a1});ar.children("div.zoomed-shadow, div.zoomed-shadow-bottom, div.zoomed-shadow-top").css({left:a1});if(z){P.trigger("closeZoom")}}n(a8,aQ,ar,ap)});P.on("keydown",function(a3){if(Y||aE){return}if(a3.keyCode==37){if(an){return}if(aD){var a2=ar.find(".big-side.show-previous");if(!a2.is(":hidden")){a2.click()}}else{ap="left";aQ.trigger("mouseover");if(ak){if(aQ.data().fauxCenter){if(aQ.turn("page")==1){aQ.trigger("cover-front")}else{aQ.turn("previous")}}else{aQ.trigger("cover-back")}}else{aQ.turn("previous")}}}else{if(a3.keyCode==39){if(an){return}if(aD){var a1=ar.find(".big-side.show-next");if(!a1.is(":hidden")){a1.click()}}else{ap="right";aQ.trigger("mouseover");if(ak){if(aQ.data().fauxCenter){if(aQ.turn("page")==aQ.data().totalPages){aQ.trigger("cover-back")}else{aQ.turn("next")}}else{aQ.trigger("cover-front")}}else{aQ.turn("next")}}}else{if(a3.keyCode==27){aQ.css({visibility:"visible","pointer-events":"all"});if(ak){af.css("visibility","visible").stop(true).animate({opacity:1},300)}aQ.stop(true).animate({opacity:1},300,function(){m("turned","false",aQ,ar,"zoom")});ar.find("div.zoomed").animate({opacity:0},300,function(){f(this).remove();aD=false;aw.find("ul li.zoom").trigger("mouseout")});u(aQ,ar,"exit","zoom");u(aQ,ar,"exit","show-all");ar.find("div.zoomed-shadow").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.zoomed-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.zoomed-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.show-all").stop(true).animate({opacity:0},300,function(){f(this).remove()});ar.find("div.showall-shadow-bottom").stop(true).animate({opacity:0},100,function(){f(this).remove()});ar.find("div.showall-shadow-top").stop(true).animate({opacity:0},100,function(){f(this).remove()})}}}}).on("hashchange",function(){D(aQ,ar)}).on("touchstart",function(a2){var a1=a2.originalEvent.touches;if(a1[0]){touchStart={x:a1[0].pageX,y:a1[0].pageY}}touchEnd=null}).on("touchmove",function(a2){var a1=a2.originalEvent.touches,a3=aQ.offset();if(a1[0].pageX>a3.left&&a1[0].pageY>a3.top&&a1[0].pageX<a3.left+aQ.width()&&a1[0].pageY<a3.top+aQ.height()){if(a1[0]){touchEnd={x:a1[0].pageX,y:a1[0].pageY}}}}).on("touchend",function(a2){if(ak&&!aQ.data().fauxCenter){return}if(window.touchStart&&window.touchEnd){var a1=aQ.width()*0.5,a3={x:touchEnd.x-touchStart.x,y:touchEnd.y-touchStart.y},a4={x:touchStart.x-aQ.offset().left,y:touchStart.y-aQ.offset().top};if(Math.abs(a3.y)<100){if(an){return}if(a3.x>100&&a4.x<a1){aQ.turn("previous")}else{if(a3.x<-100&&a4.x>a1){aQ.turn("next")}else{if(ak&&a3.x>100&&a4.x>a1&&aQ.data().fauxCenter){aQ.trigger("cover-front")}else{if(ak&&a3.x<-100&&a4.x<a1&&aQ.data().fauxCenter){aQ.trigger("cover-back")}}}}}}}).on("start",function(a2,a1){if(R){aQ.find("div.fpage object").css({display:"none"});aQ.find("div.video object").css({display:"none"})}else{aQ.find("div.fpage object").css({opacity:0})}m("start",ap,aQ,ar,"start");aX=true}).on("end",function(a1){if(R){aQ.find("div.fpage object").css({display:"block"});aQ.find("div.video object").css({display:"block"})}else{aQ.find("div.fpage object").css({opacity:1})}m("turned","false",aQ,ar,"end");aX=false;limiter=0});P.on("rfbwp.refocus-flipbook",function(){if(_rfbwp_focused_flipbook!=aQ[0].id){aE=true}else{aE=false}});ar.on("mousedown mouseenter",function(){if(_rfbwp_focused_flipbook!=aQ[0].id){_rfbwp_focused_flipbook=aQ[0].id;P.trigger("rfbwp.refocus-flipbook")}});f(".flipbook-container").first().trigger("mouseenter");B(G,H,aQ,ar,aD,H);K(aQ,ar)}j(v)}b();f(window).on("rfbwp.shelf rfbwp.popup",b);f(window).on("rfbwp.init",c)})(jQuery);var _rfbwp_focused_flipbook;